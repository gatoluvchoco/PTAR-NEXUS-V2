<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PTAR Nexus | Library Smart Digital Process</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM (UMD) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              nexus: {
                dark: '#0f172a',
                purple: '#6d28d9',
                glass: 'rgba(255, 255, 255, 0.1)',
                glassBorder: 'rgba(255, 255, 255, 0.2)',
              }
            },
            animation: {
              'scan': 'scan 2s linear infinite',
            },
            keyframes: {
              scan: {
                '0%': { top: '0%' },
                '100%': { top: '100%' },
              }
            }
          }
        }
      }
    </script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
      }
      /* Custom Scrollbar hide */
      .scrollbar-hide::-webkit-scrollbar {
          display: none;
      }
      .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
      }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Mock Data & Constants ---
        
        const ResourceType = {
          PHYSICAL: 'Physical Book',
          EBOOK: 'E-Book',
          THESIS: 'Digital Thesis',
          JOURNAL: 'Online Journal'
        };

        const initialResults = [
            {
              id: '1',
              title: 'Management of Digital Transformation',
              author: 'Dr. Marlita Mad Yusuf',
              year: 2024,
              type: ResourceType.PHYSICAL,
              shelfLocation: 'Level 2, Aisle 4, Shelf B',
              callNumber: 'HD30.2 .M37 2024',
              availability: 'Available',
              coverImage: 'https://picsum.photos/150/220?random=1'
            },
            {
              id: '2',
              title: 'The Adventures of Huckleberry Finn',
              author: 'Mark Twain',
              year: 1884,
              type: ResourceType.EBOOK,
              downloadUrl: '#',
              availability: 'Digital Access',
              coverImage: 'https://picsum.photos/150/220?random=2'
            },
            {
              id: '3',
              title: 'Impact of AI on Academic Libraries',
              author: 'Afiq Haiqal',
              year: 2023,
              type: ResourceType.THESIS,
              availability: 'Digital Access',
              coverImage: 'https://picsum.photos/150/220?random=3'
            },
            {
              id: '4',
              title: 'Strategic Information Systems Planning',
              author: 'Wahdania Ayumie',
              year: 2022,
              type: ResourceType.JOURNAL,
              availability: 'Digital Access',
              coverImage: 'https://picsum.photos/150/220?random=4'
            },
            {
              id: '5',
              title: 'Clean Code: A Handbook of Agile Software Craftsmanship',
              author: 'Robert C. Martin',
              year: 2008,
              type: ResourceType.PHYSICAL,
              shelfLocation: 'Level 3, Aisle 1, Shelf A',
              callNumber: 'QA76.76 .C65 M37',
              availability: 'On Loan',
              coverImage: 'https://picsum.photos/150/220?random=5'
            },
            {
              id: '6',
              title: 'Introduction to Algorithms',
              author: 'Thomas H. Cormen',
              year: 2022,
              type: ResourceType.EBOOK,
              availability: 'Digital Access',
              coverImage: 'https://picsum.photos/150/220?random=6'
            },
            {
              id: '7',
              title: 'User Experience Design for Mobile',
              author: 'Sarah Doody',
              year: 2023,
              type: ResourceType.JOURNAL,
              availability: 'Digital Access',
              coverImage: 'https://picsum.photos/150/220?random=7'
            },
            {
              id: '8',
              title: 'Sustainable Architecture in Tropics',
              author: 'Dr. Aminah Binti Ahmad',
              year: 2021,
              type: ResourceType.THESIS,
              availability: 'Digital Access',
              coverImage: 'https://picsum.photos/150/220?random=8'
            },
            {
              id: '9',
              title: 'Modern Operating Systems',
              author: 'Andrew S. Tanenbaum',
              year: 2014,
              type: ResourceType.PHYSICAL,
              shelfLocation: 'Level 2, Aisle 10, Shelf D',
              callNumber: 'QA76.76 .O63 T36',
              availability: 'Available',
              coverImage: 'https://picsum.photos/150/220?random=9'
            },
            {
              id: '10',
              title: 'Deep Learning',
              author: 'Ian Goodfellow',
              year: 2016,
              type: ResourceType.EBOOK,
              availability: 'Digital Access',
              coverImage: 'https://picsum.photos/150/220?random=10'
            },
            {
              id: '11',
              title: 'Malaysian Economy: Past, Present & Future',
              author: 'Prof. Jomo K.S.',
              year: 2020,
              type: ResourceType.PHYSICAL,
              shelfLocation: 'Level 1, Aisle 2, Shelf F',
              callNumber: 'HC445.5 .J66 2020',
              availability: 'Available',
              coverImage: 'https://picsum.photos/150/220?random=11'
            },
            {
              id: '12',
              title: 'Cybersecurity Trends in 2024',
              author: 'Tech Journal Weekly',
              year: 2024,
              type: ResourceType.JOURNAL,
              availability: 'Digital Access',
              coverImage: 'https://picsum.photos/150/220?random=12'
            }
        ];

        const roomData = [
            { id: '1', name: 'Discussion Room 1', capacity: 4, status: 'Occupied', nextAvailable: '14:00 PM' },
            { id: '2', name: 'Discussion Room 2', capacity: 6, status: 'Available' },
            { id: '3', name: 'Quiet Pod A', capacity: 1, status: 'Available' },
            { id: '4', name: 'Media Room', capacity: 10, status: 'Maintenance' },
        ];

        const initialAnalyticsData = [
            { name: 'Sci-Fi', value: 400, color: 'bg-purple-500' },
            { name: 'History', value: 300, color: 'bg-green-400' },
            { name: 'Tech', value: 550, color: 'bg-yellow-400' },
            { name: 'Biz', value: 200, color: 'bg-orange-400' },
        ];

        // --- Components ---

        const LoginScreen = ({ onLogin }) => {
            const [studentId, setStudentId] = useState('2024223254');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                if (studentId && password) {
                    onLogin({
                        name: 'Nurul Fatihah',
                        studentId: studentId,
                        avatarUrl: 'https://picsum.photos/200',
                        department: 'Faculty of Business & Management'
                    });
                } else {
                    setError('Please enter both ID and Password');
                }
            };

            return (
                <div className="flex h-screen w-full items-center justify-center bg-nexus-dark bg-[url('https://images.unsplash.com/photo-1507842217121-9e962835bf0e?q=80&w=2000&auto=format&fit=crop')] bg-cover bg-center">
                    <div className="absolute inset-0 bg-nexus-dark/80 backdrop-blur-sm"></div>
                    
                    <div className="relative z-10 w-full max-w-md p-8 bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl animate-fade-in-up">
                        <div className="flex flex-col items-center mb-8">
                            <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg shadow-purple-500/30 mb-4">
                                <i className="fa-solid fa-layer-group text-white text-3xl"></i>
                            </div>
                            <h1 className="text-3xl font-bold text-white tracking-wide">PTAR <span className="text-purple-400">NEXUS</span></h1>
                            <p className="text-gray-400 mt-2">Sign in to your digital library</p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-300 mb-2">Student ID</label>
                                <div className="relative">
                                    <span className="absolute left-4 top-3.5 text-gray-400"><i className="fa-solid fa-id-badge"></i></span>
                                    <input 
                                        type="text" 
                                        value={studentId}
                                        onChange={(e) => setStudentId(e.target.value)}
                                        className="w-full pl-11 pr-4 py-3 bg-black/20 border border-white/10 rounded-xl text-white focus:outline-none focus:border-purple-500 focus:bg-black/40 transition-all"
                                        placeholder="202XXXXXXX"
                                    />
                                </div>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-300 mb-2">Password</label>
                                <div className="relative">
                                    <span className="absolute left-4 top-3.5 text-gray-400"><i className="fa-solid fa-lock"></i></span>
                                    <input 
                                        type="password" 
                                        value={password}
                                        onChange={(e) => setPassword(e.target.value)}
                                        className="w-full pl-11 pr-4 py-3 bg-black/20 border border-white/10 rounded-xl text-white focus:outline-none focus:border-purple-500 focus:bg-black/40 transition-all"
                                        placeholder="••••••••"
                                    />
                                </div>
                            </div>

                            {error && <p className="text-red-400 text-sm text-center">{error}</p>}

                            <button 
                                type="submit" 
                                className="w-full py-3.5 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-xl shadow-lg shadow-purple-900/40 transition-all transform hover:scale-[1.02]"
                            >
                                Sign In
                            </button>
                        </form>
                        
                        <p className="mt-8 text-center text-xs text-gray-500">
                            By signing in, you agree to UiTM Library Terms of Service.
                        </p>
                    </div>
                </div>
            );
        };

        const Sidebar = ({ activeTab, setActiveTab, onLogout }) => {
            const menuItems = [
                { id: 'dashboard', icon: 'fa-table-columns', label: 'Dashboard' },
                { id: 'search', icon: 'fa-magnifying-glass', label: 'Unified Search' },
                { id: 'rooms', icon: 'fa-people-roof', label: 'Room Booking' },
                { id: 'digital-id', icon: 'fa-id-card', label: 'My Digital ID' },
                { id: 'analytics', icon: 'fa-chart-line', label: 'Analytics' },
            ];

            return (
                <aside className="w-20 lg:w-64 h-full flex flex-col transition-all duration-300 bg-nexus-dark/80 backdrop-blur-xl border-r border-nexus-glassBorder z-20">
                    <div className="h-20 flex items-center justify-center lg:justify-start lg:px-6 border-b border-nexus-glassBorder">
                        <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg shadow-purple-500/30 flex-shrink-0">
                            <i className="fa-solid fa-layer-group text-white text-xl"></i>
                        </div>
                        <span className="hidden lg:block ml-3 font-bold text-xl text-white tracking-wide truncate">
                            PTAR <span className="text-purple-400">NEXUS</span>
                        </span>
                    </div>

                    <nav className="flex-1 py-6 flex flex-col gap-2 px-3">
                        {menuItems.map((item) => (
                            <button
                                key={item.id}
                                onClick={() => setActiveTab(item.id)}
                                className={`flex items-center p-3 rounded-xl transition-all duration-200 group ${
                                    activeTab === item.id
                                        ? 'bg-purple-600 text-white shadow-lg shadow-purple-600/20'
                                        : 'text-gray-400 hover:bg-white/5 hover:text-white'
                                }`}
                            >
                                <i className={`fa-solid ${item.icon} w-6 text-center text-lg ${activeTab === item.id ? 'text-white' : 'text-gray-400 group-hover:text-purple-400'}`}></i>
                                <span className="hidden lg:block ml-3 font-medium whitespace-nowrap">{item.label}</span>
                                
                                {activeTab === item.id && (
                                    <div className="hidden lg:block ml-auto w-1.5 h-1.5 rounded-full bg-white animate-pulse"></div>
                                )}
                            </button>
                        ))}
                    </nav>

                    <div className="p-4 border-t border-nexus-glassBorder">
                        <button 
                            onClick={onLogout}
                            className="flex items-center justify-center lg:justify-start w-full p-3 rounded-xl text-gray-400 hover:bg-red-500/10 hover:text-red-400 transition-colors"
                        >
                            <i className="fa-solid fa-arrow-right-from-bracket w-6 text-center"></i>
                            <span className="hidden lg:block ml-3 font-medium">Logout</span>
                        </button>
                    </div>
                </aside>
            );
        };

        const Header = ({ user, isOnline, setIsOnline }) => {
            return (
                <header className="h-20 px-4 md:px-6 flex items-center justify-between bg-nexus-dark/60 backdrop-blur-md sticky top-0 z-10 border-b border-nexus-glassBorder">
                    <div className="overflow-hidden">
                        <h1 className="text-xl md:text-2xl font-bold text-white truncate">
                            Welcome, <span className="text-purple-400">{user.name.split(' ')[0]}</span>
                        </h1>
                        <p className="text-xs md:text-sm text-gray-400 truncate hidden sm:block">Bachelor of Information Systems • {user.studentId}</p>
                    </div>

                    <div className="flex items-center gap-3 md:gap-6">
                        <div 
                            onClick={() => setIsOnline(!isOnline)}
                            className={`cursor-pointer px-3 py-1.5 md:px-4 md:py-2 rounded-full border flex items-center gap-2 transition-all duration-300 ${
                                isOnline 
                                    ? 'bg-green-500/10 border-green-500/30 text-green-400' 
                                    : 'bg-red-500/10 border-red-500/30 text-red-400'
                            }`}
                        >
                            <div className={`w-2 h-2 rounded-full ${isOnline ? 'bg-green-400 animate-pulse' : 'bg-red-400'}`}></div>
                            <span className="text-xs md:text-sm font-semibold hidden sm:inline">{isOnline ? 'System Online' : 'Offline'}</span>
                        </div>

                        <div className="flex items-center gap-3 pl-3 md:pl-6 border-l border-nexus-glassBorder">
                            <button className="w-8 h-8 md:w-10 md:h-10 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center text-white transition-colors relative">
                                <i className="fa-solid fa-bell text-sm md:text-base"></i>
                                <span className="absolute top-2 right-2 w-1.5 h-1.5 md:w-2 md:h-2 bg-purple-500 rounded-full"></span>
                            </button>
                            
                            <img 
                                src={user.avatarUrl} 
                                alt={user.name} 
                                className="w-8 h-8 md:w-10 md:h-10 rounded-full border-2 border-purple-500/50 object-cover"
                            />
                        </div>
                    </div>
                </header>
            );
        };

        const UnifiedSearch = () => {
            const [query, setQuery] = useState('');
            
            const filteredResults = initialResults.filter(item => 
                item.title.toLowerCase().includes(query.toLowerCase()) || 
                item.author.toLowerCase().includes(query.toLowerCase())
            );

            return (
                <div className="w-full max-w-6xl mx-auto">
                    {/* Search Input Section */}
                    <div className="relative mb-8 md:mb-10">
                        <div className="absolute inset-y-0 left-0 pl-4 md:pl-6 flex items-center pointer-events-none">
                            <i className="fa-brands fa-google text-xl md:text-2xl text-gray-400"></i>
                        </div>
                        <input
                            type="text"
                            className="block w-full pl-12 md:pl-16 pr-6 py-4 md:py-6 bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl text-lg md:text-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:bg-white/10 transition-all shadow-2xl"
                            placeholder="Search Books, Theses, and Journals..."
                            value={query}
                            onChange={(e) => setQuery(e.target.value)}
                        />
                        <div className="absolute inset-y-0 right-4 flex items-center">
                            <button className="p-2 md:p-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl transition-colors">
                                <i className="fa-solid fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    {/* Results Section */}
                    <h3 className="text-white/80 font-semibold text-lg mb-4 md:mb-6 flex items-center">
                        <i className="fa-solid fa-layer-group mr-2"></i> Search Results ({filteredResults.length})
                    </h3>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 md:gap-6">
                        {filteredResults.map((result) => (
                            <div 
                                key={result.id} 
                                className="flex bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden hover:bg-white/10 hover:border-purple-500/30 transition-all duration-300 group"
                            >
                                <div className="w-28 md:w-32 h-auto flex-shrink-0 overflow-hidden relative">
                                    <img 
                                        src={result.coverImage} 
                                        alt={result.title} 
                                        className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                                    />
                                    <div className="absolute top-2 left-2">
                                        {result.type === ResourceType.PHYSICAL && (
                                            <span className="px-2 py-1 bg-amber-500/90 text-black text-[10px] md:text-xs font-bold rounded shadow-md">Physical</span>
                                        )}
                                        {result.type !== ResourceType.PHYSICAL && (
                                            <span className="px-2 py-1 bg-cyan-500/90 text-black text-[10px] md:text-xs font-bold rounded shadow-md">Digital</span>
                                        )}
                                    </div>
                                </div>
                                
                                <div className="p-3 md:p-4 flex flex-col justify-between flex-1 min-w-0">
                                    <div>
                                        <h4 className="text-white font-bold text-base md:text-lg leading-tight mb-1 truncate">{result.title}</h4>
                                        <p className="text-gray-400 text-xs md:text-sm mb-2 md:mb-3 truncate">{result.author} • {result.year}</p>
                                        
                                        {result.type === ResourceType.PHYSICAL ? (
                                            <div className="flex items-start gap-2 text-xs md:text-sm text-gray-300 bg-white/5 p-2 rounded-lg">
                                                <i className="fa-solid fa-location-dot mt-1 text-amber-400"></i>
                                                <div className="overflow-hidden">
                                                    <p className="font-medium text-amber-200 truncate">{result.shelfLocation}</p>
                                                    <p className="text-xs opacity-70 truncate">Call No: {result.callNumber}</p>
                                                </div>
                                            </div>
                                        ) : (
                                            <div className="flex items-center gap-2 text-xs md:text-sm text-gray-300 bg-white/5 p-2 rounded-lg">
                                                <i className="fa-solid fa-cloud-arrow-down text-cyan-400"></i>
                                                <p className="font-medium text-cyan-200">Instant Access</p>
                                            </div>
                                        )}
                                    </div>

                                    <div className="mt-3 md:mt-4 flex gap-2 md:gap-3">
                                        {result.type === ResourceType.PHYSICAL ? (
                                            <button className="flex-1 py-1.5 md:py-2 px-4 bg-white/10 hover:bg-amber-500 hover:text-black border border-white/20 text-white rounded-lg text-xs md:text-sm font-medium transition-all">
                                                Locate
                                            </button>
                                        ) : (
                                            <button className="flex-1 py-1.5 md:py-2 px-4 bg-cyan-600/20 hover:bg-cyan-500 hover:text-black border border-cyan-500/50 text-cyan-300 rounded-lg text-xs md:text-sm font-medium transition-all flex items-center justify-center gap-2">
                                                 <i className="fa-regular fa-file-pdf"></i> Download
                                            </button>
                                        )}
                                        <button className="w-8 md:w-10 flex items-center justify-center bg-white/5 hover:bg-white/20 rounded-lg text-white transition-colors">
                                            <i className="fa-regular fa-heart"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const DigitalID = ({ user }) => {
            const [scanning, setScanning] = useState(false);
            const [scanSuccess, setScanSuccess] = useState(false);

            // Generate a QR code URL
            const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${user.studentId}&color=6d28d9&bgcolor=ffffff`;

            const handleScan = () => {
                if (scanning || scanSuccess) return;
                
                setScanning(true);
                // Simulate network/kiosk delay
                setTimeout(() => {
                    setScanning(false);
                    setScanSuccess(true);
                    // Reset after 3 seconds
                    setTimeout(() => setScanSuccess(false), 3000);
                }, 2000);
            };

            return (
                <div className="bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-6 flex flex-col items-center shadow-xl relative overflow-hidden group h-full">
                    <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-pink-500"></div>
                    
                    <div className="w-full flex justify-between items-center mb-4">
                        <h3 className="text-white font-semibold flex items-center gap-2">
                            <i className="fa-solid fa-id-card text-purple-400"></i> My Digital ID
                        </h3>
                        <span className={`text-xs px-2 py-1 rounded border transition-colors ${
                            scanSuccess 
                                ? 'bg-green-500/30 text-green-200 border-green-500' 
                                : 'bg-green-500/20 text-green-300 border-green-500/30'
                        }`}>
                            {scanSuccess ? 'VERIFIED' : 'Active'}
                        </span>
                    </div>

                    <div className="relative bg-white p-3 rounded-xl mb-4 shadow-lg shadow-purple-500/20 group-hover:scale-105 transition-transform duration-300 overflow-hidden">
                        <img src={qrUrl} alt="Student ID QR" className="w-32 h-32" />
                        
                        {/* Scanning Animation Overlay */}
                        {scanning && (
                            <div className="absolute inset-0 bg-purple-500/20">
                                <div className="absolute w-full h-1 bg-red-500 shadow-[0_0_15px_rgba(239,68,68,0.8)] animate-scan"></div>
                            </div>
                        )}
                        
                        {/* Success Overlay */}
                        {scanSuccess && (
                            <div className="absolute inset-0 bg-green-500/90 flex items-center justify-center flex-col animate-fade-in">
                                <i className="fa-solid fa-circle-check text-white text-4xl mb-2"></i>
                                <span className="text-white font-bold text-sm">Access Granted</span>
                            </div>
                        )}
                    </div>

                    <p className="text-gray-300 font-mono text-lg tracking-wider mb-4">{user.studentId}</p>

                    <button 
                        onClick={handleScan}
                        disabled={scanning || scanSuccess}
                        className={`w-full py-3 rounded-xl font-medium shadow-lg transition-all flex items-center justify-center gap-2 ${
                            scanSuccess 
                                ? 'bg-green-600 text-white cursor-default'
                                : scanning 
                                    ? 'bg-gray-600 text-gray-300 cursor-wait' 
                                    : 'bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white shadow-purple-900/40'
                        }`}
                    >
                        {scanning ? (
                            <>
                                <i className="fa-solid fa-spinner fa-spin"></i> Connecting...
                            </>
                        ) : scanSuccess ? (
                            <>
                                <i className="fa-solid fa-check"></i> Scanned
                            </>
                        ) : (
                            <>
                                <i className="fa-solid fa-expand"></i> Scan at Kiosk
                            </>
                        )}
                    </button>
                </div>
            );
        };

        const RoomBooking = () => {
            return (
                <div className="bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-6 shadow-xl h-full">
                    <div className="flex justify-between items-center mb-6">
                        <h3 className="text-white font-semibold flex items-center gap-2">
                            <i className="fa-solid fa-people-roof text-pink-400"></i> Smart Room Booking
                        </h3>
                        <button className="text-xs text-purple-300 hover:text-white transition-colors">View All</button>
                    </div>

                    <div className="grid grid-cols-1 gap-4">
                        {roomData.map((room) => (
                            <div 
                                key={room.id} 
                                className="flex items-center justify-between p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-colors"
                            >
                                <div className="flex items-center gap-3">
                                    <div className={`w-3 h-3 rounded-full shadow-lg ${
                                        room.status === 'Available' ? 'bg-green-500 shadow-green-500/50' : 
                                        room.status === 'Occupied' ? 'bg-red-500 shadow-red-500/50' : 'bg-gray-500'
                                    }`}></div>
                                    <div>
                                        <h4 className="text-white text-sm font-medium">{room.name}</h4>
                                        <p className="text-xs text-gray-400">Cap: {room.capacity} pax</p>
                                    </div>
                                </div>

                                {room.status === 'Available' ? (
                                    <button className="px-3 py-1.5 bg-green-500/20 text-green-300 border border-green-500/30 rounded-lg text-xs font-semibold hover:bg-green-500 hover:text-black transition-all">
                                        Book Now
                                    </button>
                                ) : room.status === 'Occupied' ? (
                                    <span className="text-xs text-red-400 font-medium">Until {room.nextAvailable}</span>
                                ) : (
                                    <span className="text-xs text-gray-500 font-medium">Closed</span>
                                )}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const Analytics = () => {
            const [data, setData] = useState(initialAnalyticsData);

            // Simulate Real-time data updates
            useEffect(() => {
                const interval = setInterval(() => {
                    setData(prevData => prevData.map(item => ({
                        ...item,
                        // Randomly fluctuate value by -10 to +20
                        value: Math.max(10, item.value + Math.floor(Math.random() * 30) - 10)
                    })));
                }, 3000); // Update every 3 seconds

                return () => clearInterval(interval);
            }, []);

            const maxVal = Math.max(...data.map(d => d.value));

            return (
                <div className="bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-6 shadow-xl h-full flex flex-col">
                    <div className="flex justify-between items-center mb-4">
                        <h3 className="text-white font-semibold flex items-center gap-2">
                            <i className="fa-solid fa-chart-pie text-cyan-400"></i> Live Analytics
                        </h3>
                        <div className="flex items-center gap-2">
                            <span className="relative flex h-2 w-2">
                              <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                              <span className="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                            </span>
                            <span className="text-[10px] text-green-400 uppercase tracking-wider font-bold">Live</span>
                        </div>
                    </div>

                    <div className="flex-1 w-full flex items-end justify-between gap-4 mt-4 px-2">
                        {data.map((item, index) => {
                            const heightPercentage = (item.value / (maxVal * 1.2)) * 100; // * 1.2 to give some headroom
                            return (
                                <div key={index} className="flex flex-col items-center flex-1 group">
                                    <div className="relative w-full flex justify-center h-40 items-end">
                                        {/* Tooltip */}
                                        <div className="absolute -top-8 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-800 text-white text-xs px-2 py-1 rounded pointer-events-none whitespace-nowrap border border-white/10 z-10">
                                            {item.value} books
                                        </div>
                                        {/* Bar */}
                                        <div 
                                            className={`w-full max-w-[40px] rounded-t-lg transition-all duration-700 ease-out ${item.color} opacity-80 group-hover:opacity-100`}
                                            style={{ height: `${heightPercentage}%`, minHeight: '4px' }}
                                        ></div>
                                    </div>
                                    <span className="text-xs text-gray-400 mt-2 font-medium truncate w-full text-center">{item.name}</span>
                                </div>
                            );
                        })}
                    </div>
                    
                    <p className="text-center text-xs text-gray-500 mt-6 pt-4 border-t border-white/5">
                        Data updating automatically based on RFID triggers
                    </p>
                </div>
            );
        };

        const App = () => {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [user, setUser] = useState(null);
            const [activeTab, setActiveTab] = useState('dashboard');
            const [isOnline, setIsOnline] = useState(true);

            const handleLogin = (userData) => {
                setUser(userData);
                setIsLoggedIn(true);
            };

            const handleLogout = () => {
                setIsLoggedIn(false);
                setUser(null);
                setActiveTab('dashboard');
            };

            if (!isLoggedIn) {
                return <LoginScreen onLogin={handleLogin} />;
            }

            return (
                <div className="flex h-screen bg-nexus-dark text-white font-sans overflow-hidden bg-[url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop')] bg-cover bg-center">
                    
                    {/* Dark Overlay */}
                    <div className="absolute inset-0 bg-nexus-dark/90 z-0"></div>
                    <div className="absolute inset-0 bg-gradient-to-tr from-purple-900/30 to-blue-900/30 z-0 pointer-events-none"></div>

                    <div className="relative z-10 flex w-full h-full">
                        <Sidebar activeTab={activeTab} setActiveTab={setActiveTab} onLogout={handleLogout} />

                        <main className="flex-1 flex flex-col h-full overflow-hidden relative">
                            
                            <Header user={user} isOnline={isOnline} setIsOnline={setIsOnline} />

                            <div className="flex-1 overflow-y-auto p-4 md:p-6 scrollbar-hide">
                                
                                {!isOnline && (
                                    <div className="w-full bg-red-500/20 border border-red-500/40 text-red-100 p-4 rounded-xl mb-6 flex items-center gap-3 animate-pulse">
                                        <i className="fa-solid fa-triangle-exclamation"></i>
                                        <p className="text-sm md:text-base"><strong>Offline Mode Enabled:</strong> Transactions cached. Sync pending restoration.</p>
                                    </div>
                                )}

                                {/* Dashboard View (Default) */}
                                {activeTab === 'dashboard' && (
                                    <div className="flex flex-col gap-6 max-w-7xl mx-auto">
                                        <div className="w-full">
                                            <div className="mb-2">
                                                <h2 className="text-2xl md:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400">Unified Search</h2>
                                                <p className="text-gray-400 text-sm md:text-base">Access PTAR, KOHA, and Online Databases simultaneously.</p>
                                            </div>
                                            <UnifiedSearch />
                                        </div>

                                        <div className="grid grid-cols-1 md:grid-cols-12 gap-6 pb-10">
                                            <div className="md:col-span-5 lg:col-span-3">
                                                <DigitalID user={user} />
                                            </div>

                                            <div className="md:col-span-7 lg:col-span-5">
                                                <RoomBooking />
                                            </div>

                                            <div className="md:col-span-12 lg:col-span-4">
                                                <Analytics />
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {activeTab === 'search' && <UnifiedSearch />}
                                {activeTab === 'rooms' && (
                                    <div className="max-w-4xl mx-auto h-full">
                                        <RoomBooking />
                                    </div>
                                )}
                                {activeTab === 'digital-id' && (
                                    <div className="max-w-md mx-auto mt-10 md:mt-20 h-96">
                                        <DigitalID user={user} />
                                    </div>
                                )}
                                {activeTab === 'analytics' && (
                                    <div className="max-w-4xl mx-auto h-[400px] mt-10">
                                        <Analytics />
                                    </div>
                                )}

                            </div>
                        </main>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>